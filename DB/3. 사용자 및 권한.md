# 사용자 및 권한

## 사용자

- 사용자(User)는 DBMS 서버에 접속하여 각종 쿼리를 실행할 수 있는 주체이자 구성요소 중 하나이다.
- DBMS 설치 시, 최고 관리자 계정격의 권한을 가지는 사용자인 `root`가 자동으로 생성된다.

### 생성하기

- 새로운 사용자를 생성하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > CREATE USER `이름`@`호스트` IDENTIFIED BY '비밀번호';
   > ```
   > - **이름**과 **호스트**는 구성요소임으로 백틱(`` ` ``)으로 감싸야 한다.
   > - **비밀번호**는 문자열임으로 홑따옴표(`'`)로 감싸야 한다.
   > - 가령, 사용자 이름이 `study`이고, 호스트가 `localhost`이며, 비밀번호가 `test1234`인 계정을 생성하기 위한 쿼리는 아래와 같다.
   > ```mariadb
   > CREATE USER `study`@`localhost` IDENTIFIED BY 'test1234';
   > ```

### 조회하기

- 존재하는 사용자를 조회하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > SELECT `user`, `host` FROM `mysql`.`user`;
   > ```

### 수정하기

- 존재하는 사용자의 비밀번호를 수정하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > ALTER USER `이름`@`호스트` IDENTIFIED BY '새 비밀번호';
   > ```

### 삭제하기

- 존재하는 사용자를 삭제하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > DROP USER `이름`@`호스트`;
   > ```

## 권한

### 부여하기

- 존재하는 사용자에게 권한을 부여하기 위해 아래와 같이 명령한다.
   > ```mariadb
   > GRANT [ALL|부여할 권한,...] ON [*|스키마].[*|테이블] TO `사용자 이름`@`호스트` [WITH GRANT OPTION]?;
   > ```
   > - `GRANT` 대상이 되는 권한 대신 `ALL` 키워드를 사용할 경우 모든 권한을 부여하게 된다. 단, `GRANT`할 수 있는 권한은 여기에 포함되지 않는다.
   > - `ON` 대상이 되는 스키마 및 테이블 이름 대신 애스터리스크(`*`) 기호를 사용할 경우 모든 스키마 혹은 모든 테이블을 의미하게 된다.
   > - `WITH GRANT OPTION`을 추가하게 되면 해당 사용자가 다른 사용자(혹은 본인)에게 권한을 부여할 수 있는 권한까지 부여하게 됨으로 유의해야 한다.
   > - 가령, `study@localhost` 계정에게 모든 스키마 및 모든 테이블에 대해 모든 권한(`GRANT` 제외)을 부여하기 위해 아래 쿼리를 실행할 수 있다.
   > ```mariadb
   > GRANT ALL ON *.* TO `study`@`localhost`;
   > ```

### 조회하기

- 현재 접속중인 사용자의 권한을 조회하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > SHOW GRANTS;
   > ```
- 다른 사용자의 권한을 조회하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > SHOW GRANTS FOR `사용자 이름`@`호스트`;
   > ```

### 철회하기

- 존재하는 사용자가 가지고 있는 권한을 철회하기 위해 아래 쿼리를 실행한다.
   > ```mariadb
   > REVOKE [ALL|철회할 권한,...][,GRANT OPTION]? ON [*|스키마].[*|테이블] FROM `사용자 이름`@`호스트`;
   > ```
   > - 만약 해당 사용자에게 `GRANT OPTION` 권한이 있고, 해당 권한을 철회하고 싶다면 반드시 `ON` 키워드 전에 `GRANT OPTION`을 명시한다.